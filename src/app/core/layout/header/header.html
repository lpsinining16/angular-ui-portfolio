<header id="app-bar" [class.shrunk]="isShrunk()" class="fixed top-0 left-0 w-full z-50">
  <div class="nav-wrapper">
    <!-- Logo -->
    <a routerLink="/" fragment="home" (click)="onNavLinkClick('home')" class="logo">
      larscript.io
    </a>

    <!-- Desktop Menu -->
    <!-- Add 'hidden' for mobile, and 'flex' for large screens -->
    <div class="desktop-menu hidden lg:flex">
      <a routerLink="/" fragment="about" (click)="onNavLinkClick('about')" class="menu-link">
        About
      </a>
      <a routerLink="/" fragment="skills" (click)="onNavLinkClick('skills')" class="menu-link">
        Skills
      </a>
      <a routerLink="/" fragment="projects" (click)="onNavLinkClick('projects')" class="menu-link">
        Projects
      </a>
      <a routerLink="/" fragment="career" (click)="onNavLinkClick('career')" class="menu-link">
        Career
      </a>
      <a routerLink="/" fragment="contact" (click)="onNavLinkClick('contact')" class="contact-btn">
        Contact Me
      </a>

      <div class="separator"></div>

      <!-- Theme Toggle -->
      <button (click)="toggleTheme()" class="control-btn">
        @if (themeService.theme() === 'light') {
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg>
        } @else {
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
          </path>
        </svg>
        }
      </button>
      <app-volume-control></app-volume-control>
    </div>

    <!-- Mobile Menu Toggle -->
    <!-- Add 'lg:hidden' to hide it on large screens -->
    <button (click)="toggleMenu()" class="mobile-toggle-btn lg:hidden">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  @if (isMenuOpen()) {
  <div class="mobile-menu lg:hidden"> <!-- Also hide the full mobile menu on large screens -->
    <a (click)="onNavLinkClick('about')" routerLink="/" fragment="about">About</a>
    <a (click)="onNavLinkClick('skills')" routerLink="/" fragment="skills">Skills</a>
    <a (click)="onNavLinkClick('projects')" routerLink="/" fragment="projects">Projects</a>
    <a (click)="onNavLinkClick('career')" routerLink="/" fragment="career">Career</a>
    <a (click)="onNavLinkClick('contact')" routerLink="/" fragment="contact">Contact</a>

    <div class="mobile-controls border-t border-slate-200 dark:border-slate-700">
      <div class="mobile-control-row">
        <button (click)="toggleTheme()" class="mobile-control-btn-icon">
          @if (themeService.theme() === 'light') {
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
          } @else {
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
            </path>
          </svg>
          }
        </button>
        <app-volume-control class="flex-grow"></app-volume-control>
      </div>
    </div>
  </div>
  }
</header>