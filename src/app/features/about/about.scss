@use 'sass:math';

:host {
  display: block;
  // Fallback background if loaded separately, though controlled by Tailwind classes in HTML now
  --section-bg: var(--section-2-bg, #f3f4f6);
}

/* --- Animated Background Dots --- */
.dot {
  position: absolute;
  border-radius: 50%;
  background-color: var(--primary-container-soft, rgba(100, 100, 255, 0.2));
  // Simple subtle shadow for depth
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  pointer-events: none;
  animation: float-bubble 20s infinite ease-in-out alternate;
}

@for $i from 1 through 20 {
  .dot:nth-child(#{$i}) {
    $size: math.random(15) + 5 + px;
    width: $size;
    height: $size;
    // Random positions using percentage for responsiveness
    left: math.random(100) * 1%;
    top: math.random(100) * 1%;
    // Randomize animation timings for natural feel
    animation-duration: (math.random(10) + 15) + s;
    animation-delay: (math.random(5) * -1) + s;
    opacity: (math.random(5) + 2) * 0.1; // 0.2 to 0.7 opacity
  }
}

@keyframes float-bubble {
  0% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(30px, -50px) scale(1.1); }
  66% { transform: translate(-20px, 20px) scale(0.9); }
  100% { transform: translate(0, 0) scale(1); }
}

/* --- Card Stack Physics --- */
// 3D perspective container
.perspective-1000 {
  perspective: 1000px;
}

.card {
  // Critical for performant smooth animations
  will-change: transform, opacity;
  transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1); // "Out-Expo" feel
  transform-origin: 50% 0%; // Stack from top center
  backface-visibility: hidden; // Smoother rendering during 3D transforms
}

/* --- Utility --- */
.custom-scrollbar {
  &::-webkit-scrollbar {
    width: 6px;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-700 rounded-full;
  }
  &::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-600;
  }
}