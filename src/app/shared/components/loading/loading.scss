:host {
  display: block;
}

.loading-backdrop {
  @apply fixed inset-0 z-[9999] flex items-center justify-center;
  background-color: var(--background);
  transition: opacity 0.5s ease-out;
}

/* --- Main Loader Container --- */
.logo-loader {
  @apply relative;
  animation: breathe 2.5s ease-in-out infinite;
  animation-delay: 2.2s; // Adjusted delay for a smoother transition
  will-change: transform;
}

.brand-name-container {
  @apply relative; // This is now the positioning context
  animation: circle-wipe 1s ease-in-out forwards;
  will-change: clip-path;
}

.brand-name {
  @apply flex text-4xl font-bold tracking-widest;

  &::after {
    content: '';
    @apply absolute bottom-[-10px] left-0 h-1 w-full;
    background-color: var(--primary);
    transform-origin: left;
    animation: draw-line 0.6s ease-out forwards;
    animation-delay: 1.2s;
    transform: scaleX(0);
    will-change: transform;
  }
}

/* --- Text Layers for Reveal Effect --- */
.text-background {
  // This layer is now static to define the container's size
  color: var(--primary-container);
}

.text-foreground {
  // This layer is positioned absolutely to overlay the background
  @apply absolute inset-0;
  color: var(--primary);
}

/* --- Letter Animation --- */
.letter {
  @apply inline-block;
  opacity: 0;
  animation: letter-pop 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
  will-change: transform, opacity;
}

// Stagger the animation for each letter in the FOREGROUND layer only
@for $i from 1 through 9 {
  .text-foreground .letter:nth-child(#{$i}) {
    animation-delay: #{0.5 + ($i * 0.07)}s;
  }
}

/* ======================================================= */
/* =================== KEYFRAMES ========================= */
/* ======================================================= */

@keyframes circle-wipe {
  from {
    clip-path: circle(0% at 50% 50%);
  }
  to {
    clip-path: circle(150% at 50% 50%);
  }
}

@keyframes letter-pop {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes draw-line {
  from {
    transform: scaleX(0);
  }
  to {
    transform: scaleX(1);
  }
}

@keyframes breathe {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.03);
  }
}
